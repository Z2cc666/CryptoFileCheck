<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ä»¶å®Œæ•´æ€§éªŒè¯ç³»ç»Ÿ</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #282c34;
            color: #eee;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #3a3f51;
            padding: 20px;
            border-radius: 8px;
        }

        h1 {
            text-align: center;
            color: #61dafb;
            margin-bottom: 30px;
        }

        .card {
            background: #444a66;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 6px;
        }

        .card h3 {
            color: #61dafb;
            margin-top: 0;
            margin-bottom: 15px;
        }

        input[type="file"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0 15px 0;
            background: #555a7e;
            border: none;
            border-radius: 4px;
            color: #eee;
            cursor: pointer;
        }

        button {
            background-color: #61dafb;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            color: #282c34;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        button:hover {
            background-color: #21a1f1;
            transform: translateY(-1px);
        }

        button:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
            font-weight: bold;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            animation: slideIn 0.3s ease-out;
        }

        .success {
            background: #4caf50;
            color: white;
            border-left: 5px solid #2e7d32;
        }

        .error {
            background: #f44336;
            color: white;
            border-left: 5px solid #c62828;
        }

        .warning {
            background: #ff9800;
            color: white;
            border-left: 5px solid #f57c00;
        }

        .file-info {
            background: #555a7e;
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 13px;
            text-align: left;
        }

        .file-info div {
            margin-bottom: 5px;
        }

        .hash-display {
            word-break: break-all;
            color: #ffeb3b;
        }

        .download-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 15px;
            background: #4caf50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .download-btn:hover {
            background: #45a049;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading {
            display: none;
            text-align: center;
            color: #61dafb;
            margin-top: 10px;
        }

        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #61dafb;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hint {
            color: #aaa;
            font-size: 0.9em;
            margin-top: 8px;
            font-style: italic;
        }

        .feature-box {
            background: #555a7e;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
        }

        .feature-box h4 {
            color: #61dafb;
            margin-top: 0;
        }

        .feature-box ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .feature-box li {
            margin-bottom: 5px;
            color: #ccc;
        }

        /* æ¼”ç¤ºç›¸å…³æ ·å¼ */
        .demo-section {
            margin-top: 15px;
        }

        .demo-button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .step {
            background: #555a7e;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #61dafb;
        }

        .step h4 {
            color: #61dafb;
            margin-top: 0;
        }

        .step-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            width: auto;
        }

        .step-btn:hover {
            background: #45a049;
        }

        #demoContent {
            width: 100%;
            height: 150px;
            background: #3a3f51;
            color: #eee;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            resize: vertical;
        }

        .hash-result {
            background: #3a3f51;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }

        .signature-display {
            background: #2e4057;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 2px solid #4caf50;
        }

        .tamper-demo {
            margin: 15px 0;
        }

        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .content-box {
            background: #3a3f51;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 120px;
            overflow-y: auto;
        }

        .content-box.tampered {
            background: #4a2c2c;
            border: 2px solid #f44336;
        }

        .verification-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .verify-result {
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .original-verify {
            background: #2e5233;
            border: 2px solid #4caf50;
        }

        .tampered-verify {
            background: #5c2e2e;
            border: 2px solid #f44336;
        }

        /* å‰æ™¯å±•ç¤ºæ ·å¼ */
        .prospects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .prospect-item {
            background: #555a7e;
            padding: 20px;
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            transition: transform 0.3s ease;
        }

        .prospect-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .prospect-icon {
            font-size: 2.5em;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .prospect-content h4 {
            color: #61dafb;
            margin: 0 0 10px 0;
        }

        .prospect-content p {
            color: #ccc;
            margin: 0;
            line-height: 1.5;
        }

        .market-analysis {
            background: #2e4057;
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
        }

        .market-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: #3a4a5c;
            border-radius: 6px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #ccc;
            font-size: 0.9em;
        }

        .tech-features {
            display: grid;
            gap: 12px;
            margin-top: 15px;
        }

        .tech-item {
            background: #3a3f51;
            padding: 12px;
            border-radius: 4px;
            border-left: 3px solid #61dafb;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ–‡ä»¶å®Œæ•´æ€§éªŒè¯ç³»ç»Ÿ</h1>

        <!-- æ–‡ä»¶ç­¾åéƒ¨åˆ† -->
        <div class="card">
            <h3>ğŸ” ç”Ÿæˆæ•°å­—ç­¾å</h3>
            <p class="hint">ä¸Šä¼ æ–‡ä»¶ç”ŸæˆRSAæ•°å­—ç­¾åï¼Œä¿è¯æ–‡ä»¶å®Œæ•´æ€§</p>
            
            <form id="signForm" enctype="multipart/form-data">
                <label for="signFile">é€‰æ‹©è¦ç­¾åçš„æ–‡ä»¶:</label>
                <input type="file" id="signFile" name="file" required>
                <button type="submit" id="signBtn">ğŸ” ç”Ÿæˆç­¾å</button>
            </form>

            <div class="loading" id="signLoading">
                <div class="spinner"></div>æ­£åœ¨ç”Ÿæˆç­¾å...
            </div>

            <div id="signResult"></div>
        </div>

        <!-- æ–‡ä»¶éªŒè¯éƒ¨åˆ† -->
        <div class="card">
            <h3>ğŸ” éªŒè¯æ–‡ä»¶å®Œæ•´æ€§</h3>
            <p class="hint">ä¸Šä¼ åŸå§‹æ–‡ä»¶å’Œç­¾åæ–‡ä»¶è¿›è¡Œå®Œæ•´æ€§éªŒè¯</p>
            
            <form id="verifyForm" enctype="multipart/form-data">
                <label for="verifyFile">é€‰æ‹©åŸå§‹æ–‡ä»¶:</label>
                <input type="file" id="verifyFile" name="file" required>
                
                <label for="signatureFile">é€‰æ‹©ç­¾åæ–‡ä»¶ (.sig):</label>
                <input type="file" id="signatureFile" name="signature" accept=".sig" required>
                
                <button type="submit" id="verifyBtn">ğŸ” éªŒè¯ç­¾å</button>
            </form>

            <div class="loading" id="verifyLoading">
                <div class="spinner"></div>æ­£åœ¨éªŒè¯ç­¾å...
            </div>

            <div id="verifyResult"></div>
        </div>

        <!-- æ“ä½œæ¼”ç¤ºéƒ¨åˆ† -->
        <div class="card">
            <h3>ğŸ¬ æ“ä½œæ¼”ç¤º</h3>
            <div class="demo-section">
                <button id="demoBtn" class="demo-button">ğŸš€ å¼€å§‹æ¼”ç¤º</button>
                <div class="demo-steps" id="demoSteps" style="display: none;">
                    <div class="step" id="step1">
                        <h4>æ­¥éª¤ 1: åˆ›å»ºç¤ºä¾‹æ–‡ä»¶</h4>
                        <textarea id="demoContent" placeholder="è¾“å…¥æ–‡ä»¶å†…å®¹è¿›è¡Œæ¼”ç¤º...">è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„å•†ä¸šåˆåŒæ–‡æ¡£ã€‚
åˆåŒç¼–å·: CONTRACT-2024-001
ç­¾ç½²æ—¥æœŸ: 2024å¹´5æœˆ27æ—¥
ç”²æ–¹: ABCç§‘æŠ€æœ‰é™å…¬å¸
ä¹™æ–¹: XYZè´¸æ˜“å…¬å¸

åˆåŒæ¡æ¬¾:
1. åˆåŒæ€»é‡‘é¢: Â¥1,000,000
2. ä»˜æ¬¾æ–¹å¼: åˆ†æœŸä»˜æ¬¾
3. äº¤ä»˜æ—¶é—´: 2024å¹´12æœˆ31æ—¥

ç‰¹åˆ«å£°æ˜: æœ¬åˆåŒä¸€ç»ç­¾ç½²ä¸å¾—éšæ„ä¿®æ”¹</textarea>
                        <button onclick="createDemoFile()" class="step-btn">åˆ›å»ºæ–‡ä»¶</button>
                    </div>
                    
                    <div class="step" id="step2" style="display: none;">
                        <h4>æ­¥éª¤ 2: æŸ¥çœ‹æ–‡ä»¶å“ˆå¸Œ</h4>
                        <div id="originalHash" class="hash-result"></div>
                        <button onclick="signDemoFile()" class="step-btn">ç”Ÿæˆæ•°å­—ç­¾å</button>
                    </div>
                    
                    <div class="step" id="step3" style="display: none;">
                        <h4>æ­¥éª¤ 3: æ•°å­—ç­¾åç»“æœ</h4>
                        <div id="signatureResult" class="signature-display"></div>
                        <button onclick="modifyDemo()" class="step-btn">æ¨¡æ‹Ÿæ–‡ä»¶ç¯¡æ”¹</button>
                    </div>
                    
                    <div class="step" id="step4" style="display: none;">
                        <h4>æ­¥éª¤ 4: æ–‡ä»¶è¢«ç¯¡æ”¹å</h4>
                        <div class="tamper-demo">
                            <div class="before-after">
                                <div class="before">
                                    <h5>åŸå§‹å†…å®¹:</h5>
                                    <div id="originalContent" class="content-box"></div>
                                </div>
                                <div class="after">
                                    <h5>ç¯¡æ”¹åå†…å®¹:</h5>
                                    <div id="tamperedContent" class="content-box tampered"></div>
                                </div>
                            </div>
                            <div id="tamperedHash" class="hash-result"></div>
                        </div>
                        <button onclick="verifyDemo()" class="step-btn">éªŒè¯ç­¾å</button>
                    </div>
                    
                    <div class="step" id="step5" style="display: none;">
                        <h4>æ­¥éª¤ 5: éªŒè¯ç»“æœå¯¹æ¯”</h4>
                        <div class="verification-results">
                            <div class="verify-result original-verify">
                                <h5>âœ… åŸå§‹æ–‡ä»¶éªŒè¯</h5>
                                <div>çŠ¶æ€: ç­¾åæœ‰æ•ˆ</div>
                                <div>å®Œæ•´æ€§: æœªè¢«ç¯¡æ”¹</div>
                            </div>
                            <div class="verify-result tampered-verify">
                                <h5>âŒ ç¯¡æ”¹æ–‡ä»¶éªŒè¯</h5>
                                <div>çŠ¶æ€: ç­¾åæ— æ•ˆ</div>
                                <div>å®Œæ•´æ€§: æ£€æµ‹åˆ°ç¯¡æ”¹</div>
                            </div>
                        </div>
                        <button onclick="resetDemo()" class="step-btn">é‡æ–°å¼€å§‹æ¼”ç¤º</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº”ç”¨å‰æ™¯éƒ¨åˆ† -->
        <div class="card">
            <h3>ğŸš€ åº”ç”¨å‰æ™¯ä¸å‘å±•æ–¹å‘</h3>
            <div class="prospects-grid">
                <div class="prospect-item">
                    <div class="prospect-icon">ğŸ“‹</div>
                    <div class="prospect-content">
                        <h4>åˆåŒæ–‡æ¡£ä¿æŠ¤</h4>
                        <p>ä¿æŠ¤æ³•å¾‹åˆåŒã€å•†ä¸šåè®®ç­‰é‡è¦æ–‡æ¡£çš„å®Œæ•´æ€§ï¼Œé˜²æ­¢æ¶æ„ç¯¡æ”¹ï¼Œä¸ºæ³•å¾‹çº çº·æä¾›æŠ€æœ¯è¯æ®</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">ğŸ¥</div>
                    <div class="prospect-content">
                        <h4>åŒ»ç–—æ•°æ®å®‰å…¨</h4>
                        <p>ç¡®ä¿ç”µå­ç—…å†ã€æ£€æµ‹æŠ¥å‘Šç­‰åŒ»ç–—æ•°æ®çš„å®Œæ•´æ€§ï¼Œç¬¦åˆHIPAAç­‰åŒ»ç–—æ•°æ®ä¿æŠ¤æ³•è§„</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">ğŸ›ï¸</div>
                    <div class="prospect-content">
                        <h4>æ”¿åºœç”µå­æ”¿åŠ¡</h4>
                        <p>ä¿æŠ¤æ”¿åºœæ–‡ä»¶ã€å…¬å‘Šã€æ³•è§„ç­‰å®˜æ–¹æ–‡æ¡£ï¼Œç¡®ä¿å…¬æ°‘è·å–çš„ä¿¡æ¯æœªè¢«ç¯¡æ”¹</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">ğŸ’°</div>
                    <div class="prospect-content">
                        <h4>é‡‘èäº¤æ˜“è®°å½•</h4>
                        <p>ä¿æŠ¤é“¶è¡Œäº¤æ˜“è®°å½•ã€å®¡è®¡æŠ¥å‘Šã€è´¢åŠ¡æŠ¥è¡¨ç­‰é‡‘èæ•°æ®çš„å®Œæ•´æ€§å’Œå¯ä¿¡åº¦</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">ğŸ”¬</div>
                    <div class="prospect-content">
                        <h4>ç§‘ç ”æ•°æ®ä¿æŠ¤</h4>
                        <p>ç¡®ä¿å®éªŒæ•°æ®ã€ç ”ç©¶æŠ¥å‘Šçš„å®Œæ•´æ€§ï¼Œé˜²æ­¢ç§‘ç ”é€ å‡ï¼Œç»´æŠ¤å­¦æœ¯è¯šä¿¡</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">ğŸŒ</div>
                    <div class="prospect-content">
                        <h4>åŒºå—é“¾é›†æˆ</h4>
                        <p>ç»“åˆåŒºå—é“¾æŠ€æœ¯ï¼Œå®ç°åˆ†å¸ƒå¼çš„æ–‡ä»¶å®Œæ•´æ€§éªŒè¯ï¼Œæä¾›ä¸å¯ç¯¡æ”¹çš„æ—¶é—´æˆ³è¯æ˜</p>
                    </div>
                </div>
            </div>
            
            <div class="market-analysis">
                <h4>ğŸ“Š å¸‚åœºå‰æ™¯åˆ†æ</h4>
                <div class="market-stats">
                    <div class="stat-item">
                        <div class="stat-number">$156äº¿</div>
                        <div class="stat-label">2024å¹´å…¨çƒæ•°å­—ç­¾åå¸‚åœºè§„æ¨¡</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">23.8%</div>
                        <div class="stat-label">å¹´å¤åˆå¢é•¿ç‡(2024-2030)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">ä¼ä¸šè®¤ä¸ºæ•°æ®å®Œæ•´æ€§è‡³å…³é‡è¦</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æŠ€æœ¯ä¼˜åŠ¿éƒ¨åˆ† -->
        <div class="feature-box">
            <h4>ğŸ›¡ï¸ æŠ€æœ¯ä¼˜åŠ¿</h4>
            <div class="tech-features">
                <div class="tech-item">
                    <strong>ğŸ” RSA-2048åŠ å¯†:</strong> ä½¿ç”¨å·¥ä¸šçº§2048ä½RSAå¯†é’¥å¯¹ï¼Œå®‰å…¨æ€§è¾¾åˆ°æ”¿åºœçº§æ ‡å‡†
                </div>
                <div class="tech-item">
                    <strong>ğŸ” SHA-256å“ˆå¸Œ:</strong> é‡‡ç”¨ç¾å›½å›½å®¶å®‰å…¨å±€è®¾è®¡çš„å®‰å…¨å“ˆå¸Œç®—æ³•ï¼ŒæŠ—ç¢°æ’èƒ½åŠ›å¼º
                </div>
                <div class="tech-item">
                    <strong>ğŸ›¡ï¸ PSSå¡«å……æ–¹æ¡ˆ:</strong> æ¦‚ç‡ç­¾åæ–¹æ¡ˆï¼Œæä¾›å¯è¯æ˜çš„å®‰å…¨æ€§ä¿è¯
                </div>
                <div class="tech-item">
                    <strong>âš¡ é«˜æ€§èƒ½å¤„ç†:</strong> ä¼˜åŒ–ç®—æ³•å®ç°ï¼Œæ”¯æŒå¤§æ–‡ä»¶å¿«é€Ÿç­¾åéªŒè¯
                </div>
                <div class="tech-item">
                    <strong>ğŸ”„ è‡ªåŠ¨åŒ–ç®¡ç†:</strong> å¯†é’¥è‡ªåŠ¨ç”Ÿæˆä¸ç®¡ç†ï¼Œé™ä½äººä¸ºé”™è¯¯é£é™©
                </div>
                <div class="tech-item">
                    <strong>ğŸ“± è·¨å¹³å°æ”¯æŒ:</strong> åŸºäºWebæŠ€æœ¯ï¼Œæ”¯æŒæ‰€æœ‰ä¸»æµæ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ–‡ä»¶ç­¾åå¤„ç†
        document.getElementById('signForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const signBtn = document.getElementById('signBtn');
            const loading = document.getElementById('signLoading');
            const result = document.getElementById('signResult');
            
            // æ˜¾ç¤ºloadingçŠ¶æ€
            signBtn.disabled = true;
            loading.style.display = 'block';
            result.innerHTML = '';
            
            try {
                const response = await fetch('/upload', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    result.innerHTML = `
                        <div class="result success">
                            âœ… ${data.message}
                            <div class="file-info">
                                <div><strong>æ–‡ä»¶å:</strong> ${data.filename}</div>
                                <div><strong>æ–‡ä»¶å¤§å°:</strong> ${data.filesize} å­—èŠ‚</div>
                                <div><strong>SHA-256:</strong> <span class="hash-display">${data.hash}</span></div>
                                <div><strong>ç­¾åæ–‡ä»¶:</strong> ${data.signature_file}</div>
                            </div>
                            <a href="/download/${data.signature_file}" class="download-btn">ğŸ“¥ ä¸‹è½½ç­¾åæ–‡ä»¶</a>
                        </div>
                    `;
                } else {
                    result.innerHTML = `<div class="result error">âŒ ${data.message}</div>`;
                }
            } catch (error) {
                result.innerHTML = `<div class="result error">âŒ ç½‘ç»œé”™è¯¯: ${error.message}</div>`;
            } finally {
                signBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        // æ–‡ä»¶éªŒè¯å¤„ç†
        document.getElementById('verifyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const verifyBtn = document.getElementById('verifyBtn');
            const loading = document.getElementById('verifyLoading');
            const result = document.getElementById('verifyResult');
            
            // æ˜¾ç¤ºloadingçŠ¶æ€
            verifyBtn.disabled = true;
            loading.style.display = 'block';
            result.innerHTML = '';
            
            try {
                const response = await fetch('/verify', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const resultClass = data.verified ? 'success' : 'warning';
                    const icon = data.verified ? 'âœ…' : 'âŒ';
                    
                    result.innerHTML = `
                        <div class="result ${resultClass}">
                            ${icon} ${data.message}
                            <div class="file-info">
                                <div><strong>æ–‡ä»¶å:</strong> ${data.filename}</div>
                                <div><strong>æ–‡ä»¶å¤§å°:</strong> ${data.filesize} å­—èŠ‚</div>
                                <div><strong>SHA-256:</strong> <span class="hash-display">${data.hash}</span></div>
                                <div><strong>éªŒè¯çŠ¶æ€:</strong> ${data.verified ? 'é€šè¿‡' : 'å¤±è´¥'}</div>
                            </div>
                        </div>
                    `;
                } else {
                    result.innerHTML = `<div class="result error">âŒ ${data.message}</div>`;
                }
            } catch (error) {
                result.innerHTML = `<div class="result error">âŒ ç½‘ç»œé”™è¯¯: ${error.message}</div>`;
            } finally {
                verifyBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        // æ¸…é™¤ç»“æœå½“æ–‡ä»¶æ”¹å˜æ—¶
        document.getElementById('signFile').addEventListener('change', () => {
            document.getElementById('signResult').innerHTML = '';
        });

        document.getElementById('verifyFile').addEventListener('change', () => {
            document.getElementById('verifyResult').innerHTML = '';
        });

        document.getElementById('signatureFile').addEventListener('change', () => {
            document.getElementById('verifyResult').innerHTML = '';
        });

        // æ¼”ç¤ºåŠŸèƒ½
        let demoData = {
            originalContent: '',
            tamperedContent: '',
            originalHash: '',
            tamperedHash: '',
            signature: ''
        };

        function startDemo() {
            document.getElementById('demoSteps').style.display = 'block';
            document.getElementById('demoBtn').textContent = 'æ¼”ç¤ºè¿›è¡Œä¸­...';
            document.getElementById('demoBtn').disabled = true;
        }

        function createDemoFile() {
            const content = document.getElementById('demoContent').value;
            demoData.originalContent = content;
            
            // æ¨¡æ‹Ÿè®¡ç®—å“ˆå¸Œ
            const hash = calculateSimpleHash(content);
            demoData.originalHash = hash;
            
            document.getElementById('originalHash').innerHTML = `
                <div><strong>æ–‡ä»¶å†…å®¹é•¿åº¦:</strong> ${content.length} å­—ç¬¦</div>
                <div><strong>SHA-256å“ˆå¸Œ:</strong> <span style="color: #ffeb3b;">${hash}</span></div>
            `;
            
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
        }

        function signDemoFile() {
            // æ¨¡æ‹Ÿç”Ÿæˆæ•°å­—ç­¾å
            const signature = generateMockSignature(demoData.originalHash);
            demoData.signature = signature;
            
            document.getElementById('signatureResult').innerHTML = `
                <div style="color: #4caf50; font-weight: bold; margin-bottom: 10px;">âœ… æ•°å­—ç­¾åç”ŸæˆæˆåŠŸ</div>
                <div><strong>ç­¾åç®—æ³•:</strong> RSA-2048 + PSSå¡«å……</div>
                <div><strong>ç­¾åé•¿åº¦:</strong> 256 å­—èŠ‚</div>
                <div><strong>ç­¾åæ‘˜è¦:</strong> <span style="color: #ffeb3b; font-family: monospace;">${signature.substring(0, 32)}...</span></div>
                <div style="margin-top: 10px; padding: 10px; background: #2e4057; border-radius: 4px;">
                    <div style="color: #61dafb; font-weight: bold;">ğŸ” åŠ å¯†ç­¾åæ•°æ® (éƒ¨åˆ†æ˜¾ç¤º):</div>
                    <div style="font-family: monospace; font-size: 11px; word-break: break-all; color: #ffeb3b; margin-top: 5px;">
                        ${signature}
                    </div>
                </div>
            `;
            
            document.getElementById('step2').style.display = 'none';
            document.getElementById('step3').style.display = 'block';
        }

        function modifyDemo() {
            // æ¨¡æ‹Ÿæ–‡ä»¶ç¯¡æ”¹
            demoData.tamperedContent = demoData.originalContent.replace('Â¥1,000,000', 'Â¥10,000,000');
            demoData.tamperedContent = demoData.tamperedContent.replace('æœ¬åˆåŒä¸€ç»ç­¾ç½²ä¸å¾—éšæ„ä¿®æ”¹', 'æœ¬åˆåŒæ¡æ¬¾å¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´');
            
            demoData.tamperedHash = calculateSimpleHash(demoData.tamperedContent);
            
            document.getElementById('originalContent').textContent = demoData.originalContent.substring(0, 150) + '...';
            document.getElementById('tamperedContent').textContent = demoData.tamperedContent.substring(0, 150) + '...';
            
            document.getElementById('tamperedHash').innerHTML = `
                <div style="color: #f44336;"><strong>âš ï¸ æ£€æµ‹åˆ°æ–‡ä»¶ä¿®æ”¹</strong></div>
                <div><strong>åŸå§‹å“ˆå¸Œ:</strong> <span style="color: #4caf50;">${demoData.originalHash}</span></div>
                <div><strong>å½“å‰å“ˆå¸Œ:</strong> <span style="color: #f44336;">${demoData.tamperedHash}</span></div>
                <div style="color: #ff9800; margin-top: 10px;"><strong>å“ˆå¸Œå€¼ä¸åŒ¹é… - æ–‡ä»¶å·²è¢«ç¯¡æ”¹ï¼</strong></div>
            `;
            
            document.getElementById('step3').style.display = 'none';
            document.getElementById('step4').style.display = 'block';
        }

        function verifyDemo() {
            document.getElementById('step4').style.display = 'none';
            document.getElementById('step5').style.display = 'block';
        }

        function resetDemo() {
            document.getElementById('demoSteps').style.display = 'none';
            document.getElementById('demoBtn').textContent = 'ğŸš€ å¼€å§‹æ¼”ç¤º';
            document.getElementById('demoBtn').disabled = false;
            
            // é‡ç½®æ‰€æœ‰æ­¥éª¤
            for(let i = 1; i <= 5; i++) {
                document.getElementById(`step${i}`).style.display = i === 1 ? 'block' : 'none';
            }
            
            // æ¸…ç©ºæ¼”ç¤ºæ•°æ®
            demoData = {
                originalContent: '',
                tamperedContent: '',
                originalHash: '',
                tamperedHash: '',
                signature: ''
            };
        }

        // ç®€å•å“ˆå¸Œæ¨¡æ‹Ÿå‡½æ•° (ä»…ç”¨äºæ¼”ç¤º)
        function calculateSimpleHash(content) {
            let hash = 0;
            if (content.length === 0) return hash.toString(16).padStart(64, '0');
            for (let i = 0; i < content.length; i++) {
                const char = content.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // è½¬æ¢ä¸º32ä½æ•´æ•°
            }
            // ç”Ÿæˆç±»ä¼¼SHA-256çš„64ä½åå…­è¿›åˆ¶å­—ç¬¦ä¸²
            const hashStr = Math.abs(hash).toString(16);
            return (hashStr + '0'.repeat(64)).substring(0, 64);
        }

        // æ¨¡æ‹Ÿç”Ÿæˆç­¾å
        function generateMockSignature(hash) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
            let signature = '';
            for (let i = 0; i < 344; i++) { // Base64ç¼–ç çš„256å­—èŠ‚å¤§çº¦æ˜¯344ä¸ªå­—ç¬¦
                signature += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return signature;
        }

        // æ¼”ç¤ºæŒ‰é’®äº‹ä»¶
        document.getElementById('demoBtn').addEventListener('click', startDemo);
    </script>
</body>
</html>