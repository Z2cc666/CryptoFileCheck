<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êñá‰ª∂ÂÆåÊï¥ÊÄßÈ™åËØÅÁ≥ªÁªü</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #282c34;
            color: #eee;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #3a3f51;
            padding: 20px;
            border-radius: 8px;
        }

        h1 {
            text-align: center;
            color: #61dafb;
            margin-bottom: 30px;
        }

        .card {
            background: #444a66;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 6px;
        }

        .card h3 {
            color: #61dafb;
            margin-top: 0;
            margin-bottom: 15px;
        }

        input[type="file"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0 15px 0;
            background: #555a7e;
            border: none;
            border-radius: 4px;
            color: #eee;
            cursor: pointer;
        }

        button {
            background-color: #61dafb;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            color: #282c34;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        button:hover {
            background-color: #21a1f1;
            transform: translateY(-1px);
        }

        button:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
            font-weight: bold;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            animation: slideIn 0.3s ease-out;
        }

        .success {
            background: #4caf50;
            color: white;
            border-left: 5px solid #2e7d32;
        }

        .error {
            background: #f44336;
            color: white;
            border-left: 5px solid #c62828;
        }

        .warning {
            background: #ff9800;
            color: white;
            border-left: 5px solid #f57c00;
        }

        .file-info {
            background: #555a7e;
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 13px;
            text-align: left;
        }

        .file-info div {
            margin-bottom: 5px;
        }

        .hash-display {
            word-break: break-all;
            color: #ffeb3b;
        }

        .download-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 15px;
            background: #4caf50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .download-btn:hover {
            background: #45a049;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loading {
            display: none;
            text-align: center;
            color: #61dafb;
            margin-top: 10px;
        }

        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #61dafb;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hint {
            color: #aaa;
            font-size: 0.9em;
            margin-top: 8px;
            font-style: italic;
        }

        .feature-box {
            background: #555a7e;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
        }

        .feature-box h4 {
            color: #61dafb;
            margin-top: 0;
        }

        .feature-box ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .feature-box li {
            margin-bottom: 5px;
            color: #ccc;
        }

        /* ÊºîÁ§∫Áõ∏ÂÖ≥Ê†∑Âºè */
        .demo-section {
            margin-top: 15px;
        }

        .demo-button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .step {
            background: #555a7e;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #61dafb;
        }

        .step h4 {
            color: #61dafb;
            margin-top: 0;
        }

        .step-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            width: auto;
        }

        .step-btn:hover {
            background: #45a049;
        }

        #demoContent {
            width: 100%;
            height: 150px;
            background: #3a3f51;
            color: #eee;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            resize: vertical;
        }

        .hash-result {
            background: #3a3f51;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
        }

        .signature-display {
            background: #2e4057;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border: 2px solid #4caf50;
        }

        .tamper-demo {
            margin: 15px 0;
        }

        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .content-box {
            background: #3a3f51;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 120px;
            overflow-y: auto;
        }

        .content-box.tampered {
            background: #4a2c2c;
            border: 2px solid #f44336;
        }

        .verification-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .verify-result {
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .original-verify {
            background: #2e5233;
            border: 2px solid #4caf50;
        }

        .tampered-verify {
            background: #5c2e2e;
            border: 2px solid #f44336;
        }

        /* ÂâçÊôØÂ±ïÁ§∫Ê†∑Âºè */
        .prospects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .prospect-item {
            background: #555a7e;
            padding: 20px;
            border-radius: 8px;
            display: flex;
            align-items: flex-start;
            transition: transform 0.3s ease;
        }

        .prospect-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .prospect-icon {
            font-size: 2.5em;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .prospect-content h4 {
            color: #61dafb;
            margin: 0 0 10px 0;
        }

        .prospect-content p {
            color: #ccc;
            margin: 0;
            line-height: 1.5;
        }

        .market-analysis {
            background: #2e4057;
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
        }

        .market-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: #3a4a5c;
            border-radius: 6px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4caf50;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #ccc;
            font-size: 0.9em;
        }

        .tech-features {
            display: grid;
            gap: 12px;
            margin-top: 15px;
        }

        .tech-item {
            background: #3a3f51;
            padding: 12px;
            border-radius: 4px;
            border-left: 3px solid #61dafb;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Êñá‰ª∂ÂÆåÊï¥ÊÄßÈ™åËØÅÁ≥ªÁªü</h1>

        <!-- Êñá‰ª∂Á≠æÂêçÈÉ®ÂàÜ -->
        <div class="card">
            <h3>üîè ÁîüÊàêÊï∞Â≠óÁ≠æÂêç</h3>
            <p class="hint">‰∏ä‰º†Êñá‰ª∂ÁîüÊàêRSAÊï∞Â≠óÁ≠æÂêçÔºå‰øùËØÅÊñá‰ª∂ÂÆåÊï¥ÊÄß</p>
            
            <form id="signForm" enctype="multipart/form-data">
                <label for="signFile">ÈÄâÊã©Ë¶ÅÁ≠æÂêçÁöÑÊñá‰ª∂:</label>
                <input type="file" id="signFile" name="file" required>
                <button type="submit" id="signBtn">üîè ÁîüÊàêÁ≠æÂêç</button>
            </form>

            <div class="loading" id="signLoading">
                <div class="spinner"></div>Ê≠£Âú®ÁîüÊàêÁ≠æÂêç...
            </div>

            <div id="signResult"></div>
        </div>

        <!-- Êñá‰ª∂È™åËØÅÈÉ®ÂàÜ -->
        <div class="card">
            <h3>üîç È™åËØÅÊñá‰ª∂ÂÆåÊï¥ÊÄß</h3>
            <p class="hint">‰∏ä‰º†ÂéüÂßãÊñá‰ª∂ÂíåÁ≠æÂêçÊñá‰ª∂ËøõË°åÂÆåÊï¥ÊÄßÈ™åËØÅ</p>
            
            <form id="verifyForm" enctype="multipart/form-data">
                <label for="verifyFile">ÈÄâÊã©ÂéüÂßãÊñá‰ª∂:</label>
                <input type="file" id="verifyFile" name="file" required>
                
                <label for="signatureFile">ÈÄâÊã©Á≠æÂêçÊñá‰ª∂ (.sig):</label>
                <input type="file" id="signatureFile" name="signature" accept=".sig" required>
                
                <button type="submit" id="verifyBtn">üîç È™åËØÅÁ≠æÂêç</button>
            </form>

            <div class="loading" id="verifyLoading">
                <div class="spinner"></div>Ê≠£Âú®È™åËØÅÁ≠æÂêç...
            </div>

            <div id="verifyResult"></div>
        </div>

        <!-- Êìç‰ΩúÊºîÁ§∫ÈÉ®ÂàÜ -->
        <div class="card">
            <h3>üé¨ Êìç‰ΩúÊºîÁ§∫</h3>
            <div class="demo-section">
                <button id="demoBtn" class="demo-button">üöÄ ÂºÄÂßãÊºîÁ§∫</button>
                <div class="demo-steps" id="demoSteps" style="display: none;">
                    <div class="step" id="step1">
                        <h4>Ê≠•È™§ 1: ÂàõÂª∫Á§∫‰æãÊñá‰ª∂</h4>
                        <textarea id="demoContent" placeholder="ËæìÂÖ•Êñá‰ª∂ÂÜÖÂÆπËøõË°åÊºîÁ§∫...">ËøôÊòØ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂïÜ‰∏öÂêàÂêåÊñáÊ°£„ÄÇ
ÂêàÂêåÁºñÂè∑: CONTRACT-2024-001
Á≠æÁΩ≤Êó•Êúü: 2024Âπ¥5Êúà27Êó•
Áî≤Êñπ: ABCÁßëÊäÄÊúâÈôêÂÖ¨Âè∏
‰πôÊñπ: XYZË¥∏ÊòìÂÖ¨Âè∏

ÂêàÂêåÊù°Ê¨æ:
1. ÂêàÂêåÊÄªÈáëÈ¢ù: ¬•1,000,000
2. ‰ªòÊ¨æÊñπÂºè: ÂàÜÊúü‰ªòÊ¨æ
3. ‰∫§‰ªòÊó∂Èó¥: 2024Âπ¥12Êúà31Êó•

ÁâπÂà´Â£∞Êòé: Êú¨ÂêàÂêå‰∏ÄÁªèÁ≠æÁΩ≤‰∏çÂæóÈöèÊÑè‰øÆÊîπ</textarea>
                        <button onclick="createDemoFile()" class="step-btn">ÂàõÂª∫Êñá‰ª∂</button>
                    </div>
                    
                    <div class="step" id="step2" style="display: none;">
                        <h4>Ê≠•È™§ 2: Êü•ÁúãÊñá‰ª∂ÂìàÂ∏å</h4>
                        <div id="originalHash" class="hash-result"></div>
                        <button onclick="signDemoFile()" class="step-btn">ÁîüÊàêÊï∞Â≠óÁ≠æÂêç</button>
                    </div>
                    
                    <div class="step" id="step3" style="display: none;">
                        <h4>Ê≠•È™§ 3: Êï∞Â≠óÁ≠æÂêçÁªìÊûú</h4>
                        <div id="signatureResult" class="signature-display"></div>
                        <button onclick="modifyDemo()" class="step-btn">Ê®°ÊãüÊñá‰ª∂ÁØ°Êîπ</button>
                    </div>
                    
                    <div class="step" id="step4" style="display: none;">
                        <h4>Ê≠•È™§ 4: Êñá‰ª∂Ë¢´ÁØ°ÊîπÂêé</h4>
                        <div class="tamper-demo">
                            <div class="before-after">
                                <div class="before">
                                    <h5>ÂéüÂßãÂÜÖÂÆπ:</h5>
                                    <div id="originalContent" class="content-box"></div>
                                </div>
                                <div class="after">
                                    <h5>ÁØ°ÊîπÂêéÂÜÖÂÆπ:</h5>
                                    <div id="tamperedContent" class="content-box tampered"></div>
                                </div>
                            </div>
                            <div id="tamperedHash" class="hash-result"></div>
                        </div>
                        <button onclick="verifyDemo()" class="step-btn">È™åËØÅÁ≠æÂêç</button>
                    </div>
                    
                    <div class="step" id="step5" style="display: none;">
                        <h4>Ê≠•È™§ 5: È™åËØÅÁªìÊûúÂØπÊØî</h4>
                        <div class="verification-results">
                            <div class="verify-result original-verify">
                                <h5>‚úÖ ÂéüÂßãÊñá‰ª∂È™åËØÅ</h5>
                                <div>Áä∂ÊÄÅ: Á≠æÂêçÊúâÊïà</div>
                                <div>ÂÆåÊï¥ÊÄß: Êú™Ë¢´ÁØ°Êîπ</div>
                            </div>
                            <div class="verify-result tampered-verify">
                                <h5>‚ùå ÁØ°ÊîπÊñá‰ª∂È™åËØÅ</h5>
                                <div>Áä∂ÊÄÅ: Á≠æÂêçÊó†Êïà</div>
                                <div>ÂÆåÊï¥ÊÄß: Ê£ÄÊµãÂà∞ÁØ°Êîπ</div>
                            </div>
                        </div>
                        <button onclick="resetDemo()" class="step-btn">ÈáçÊñ∞ÂºÄÂßãÊºîÁ§∫</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Â∫îÁî®ÂâçÊôØÈÉ®ÂàÜ -->
        <div class="card">
            <h3>üöÄ Â∫îÁî®ÂâçÊôØ‰∏éÂèëÂ±ïÊñπÂêë</h3>
            <div class="prospects-grid">
                <div class="prospect-item">
                    <div class="prospect-icon">üìã</div>
                    <div class="prospect-content">
                        <h4>ÂêàÂêåÊñáÊ°£‰øùÊä§</h4>
                        <p>‰øùÊä§Ê≥ïÂæãÂêàÂêå„ÄÅÂïÜ‰∏öÂçèËÆÆÁ≠âÈáçË¶ÅÊñáÊ°£ÁöÑÂÆåÊï¥ÊÄßÔºåÈò≤Ê≠¢ÊÅ∂ÊÑèÁØ°ÊîπÔºå‰∏∫Ê≥ïÂæãÁ∫†Á∫∑Êèê‰æõÊäÄÊúØËØÅÊçÆ</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">üè•</div>
                    <div class="prospect-content">
                        <h4>ÂåªÁñóÊï∞ÊçÆÂÆâÂÖ®</h4>
                        <p>Á°Æ‰øùÁîµÂ≠êÁóÖÂéÜ„ÄÅÊ£ÄÊµãÊä•ÂëäÁ≠âÂåªÁñóÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÔºåÁ¨¶ÂêàHIPAAÁ≠âÂåªÁñóÊï∞ÊçÆ‰øùÊä§Ê≥ïËßÑ</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">üèõÔ∏è</div>
                    <div class="prospect-content">
                        <h4>ÊîøÂ∫úÁîµÂ≠êÊîøÂä°</h4>
                        <p>‰øùÊä§ÊîøÂ∫úÊñá‰ª∂„ÄÅÂÖ¨Âëä„ÄÅÊ≥ïËßÑÁ≠âÂÆòÊñπÊñáÊ°£ÔºåÁ°Æ‰øùÂÖ¨Ê∞ëËé∑ÂèñÁöÑ‰ø°ÊÅØÊú™Ë¢´ÁØ°Êîπ</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">üí∞</div>
                    <div class="prospect-content">
                        <h4>ÈáëËûç‰∫§ÊòìËÆ∞ÂΩï</h4>
                        <p>‰øùÊä§Èì∂Ë°å‰∫§ÊòìËÆ∞ÂΩï„ÄÅÂÆ°ËÆ°Êä•Âëä„ÄÅË¥¢Âä°Êä•Ë°®Á≠âÈáëËûçÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÂíåÂèØ‰ø°Â∫¶</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">üî¨</div>
                    <div class="prospect-content">
                        <h4>ÁßëÁ†îÊï∞ÊçÆ‰øùÊä§</h4>
                        <p>Á°Æ‰øùÂÆûÈ™åÊï∞ÊçÆ„ÄÅÁ†îÁ©∂Êä•ÂëäÁöÑÂÆåÊï¥ÊÄßÔºåÈò≤Ê≠¢ÁßëÁ†îÈÄ†ÂÅáÔºåÁª¥Êä§Â≠¶ÊúØËØö‰ø°</p>
                    </div>
                </div>
                
                <div class="prospect-item">
                    <div class="prospect-icon">üåê</div>
                    <div class="prospect-content">
                        <h4>Âå∫ÂùóÈìæÈõÜÊàê</h4>
                        <p>ÁªìÂêàÂå∫ÂùóÈìæÊäÄÊúØÔºåÂÆûÁé∞ÂàÜÂ∏ÉÂºèÁöÑÊñá‰ª∂ÂÆåÊï¥ÊÄßÈ™åËØÅÔºåÊèê‰æõ‰∏çÂèØÁØ°ÊîπÁöÑÊó∂Èó¥Êà≥ËØÅÊòé</p>
                    </div>
                </div>
            </div>
            
            <div class="market-analysis">
                <h4>üìä Â∏ÇÂú∫ÂâçÊôØÂàÜÊûê</h4>
                <div class="market-stats">
                    <div class="stat-item">
                        <div class="stat-number">$156‰∫ø</div>
                        <div class="stat-label">2024Âπ¥ÂÖ®ÁêÉÊï∞Â≠óÁ≠æÂêçÂ∏ÇÂú∫ËßÑÊ®°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">23.8%</div>
                        <div class="stat-label">Âπ¥Â§çÂêàÂ¢ûÈïøÁéá(2024-2030)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">‰ºÅ‰∏öËÆ§‰∏∫Êï∞ÊçÆÂÆåÊï¥ÊÄßËá≥ÂÖ≥ÈáçË¶Å</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÊäÄÊúØ‰ºòÂäøÈÉ®ÂàÜ -->
        <div class="feature-box">
            <h4>üõ°Ô∏è ÊäÄÊúØ‰ºòÂäø</h4>
            <div class="tech-features">
                <div class="tech-item">
                    <strong>üîê RSA-2048Âä†ÂØÜ:</strong> ‰ΩøÁî®Â∑•‰∏öÁ∫ß2048‰ΩçRSAÂØÜÈí•ÂØπÔºåÂÆâÂÖ®ÊÄßËææÂà∞ÊîøÂ∫úÁ∫ßÊ†áÂáÜ
                </div>
                <div class="tech-item">
                    <strong>üîç SHA-256ÂìàÂ∏å:</strong> ÈááÁî®ÁæéÂõΩÂõΩÂÆ∂ÂÆâÂÖ®Â±ÄËÆæËÆ°ÁöÑÂÆâÂÖ®ÂìàÂ∏åÁÆóÊ≥ïÔºåÊäóÁ¢∞ÊíûËÉΩÂäõÂº∫
                </div>
                <div class="tech-item">
                    <strong>üõ°Ô∏è PSSÂ°´ÂÖÖÊñπÊ°à:</strong> Ê¶ÇÁéáÁ≠æÂêçÊñπÊ°àÔºåÊèê‰æõÂèØËØÅÊòéÁöÑÂÆâÂÖ®ÊÄß‰øùËØÅ
                </div>
                <div class="tech-item">
                    <strong>‚ö° È´òÊÄßËÉΩÂ§ÑÁêÜ:</strong> ‰ºòÂåñÁÆóÊ≥ïÂÆûÁé∞ÔºåÊîØÊåÅÂ§ßÊñá‰ª∂Âø´ÈÄüÁ≠æÂêçÈ™åËØÅ
                </div>
                <div class="tech-item">
                    <strong>üîÑ Ëá™Âä®ÂåñÁÆ°ÁêÜ:</strong> ÂØÜÈí•Ëá™Âä®ÁîüÊàê‰∏éÁÆ°ÁêÜÔºåÈôç‰Ωé‰∫∫‰∏∫ÈîôËØØÈ£éÈô©
                </div>
                <div class="tech-item">
                    <strong>üì± Ë∑®Âπ≥Âè∞ÊîØÊåÅ:</strong> Âü∫‰∫éWebÊäÄÊúØÔºåÊîØÊåÅÊâÄÊúâ‰∏ªÊµÅÊìç‰ΩúÁ≥ªÁªüÂíåÊµèËßàÂô®
                </div>
            </div>
        </div>
    </div>

    <script>
        // Êñá‰ª∂Á≠æÂêçÂ§ÑÁêÜ
        document.getElementById('signForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const signBtn = document.getElementById('signBtn');
            const loading = document.getElementById('signLoading');
            const result = document.getElementById('signResult');
            
            // ÊòæÁ§∫loadingÁä∂ÊÄÅ
            signBtn.disabled = true;
            loading.style.display = 'block';
            result.innerHTML = '';
            
            try {
                const response = await fetch('/upload', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    result.innerHTML = `
                        <div class="result success">
                            ‚úÖ ${data.message}
                            <div class="file-info">
                                <div><strong>Êñá‰ª∂Âêç:</strong> ${data.filename}</div>
                                <div><strong>Êñá‰ª∂Â§ßÂ∞è:</strong> ${data.filesize} Â≠óËäÇ</div>
                                <div><strong>SHA-256:</strong> <span class="hash-display">${data.hash}</span></div>
                                <div><strong>Á≠æÂêçÊñá‰ª∂:</strong> ${data.signature_file}</div>
                            </div>
                            <a href="/download/${data.signature_file}" class="download-btn">üì• ‰∏ãËΩΩÁ≠æÂêçÊñá‰ª∂</a>
                        </div>
                    `;
                } else {
                    result.innerHTML = `<div class="result error">‚ùå ${data.message}</div>`;
                }
            } catch (error) {
                result.innerHTML = `<div class="result error">‚ùå ÁΩëÁªúÈîôËØØ: ${error.message}</div>`;
            } finally {
                signBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        // Êñá‰ª∂È™åËØÅÂ§ÑÁêÜ
        document.getElementById('verifyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const verifyBtn = document.getElementById('verifyBtn');
            const loading = document.getElementById('verifyLoading');
            const result = document.getElementById('verifyResult');
            
            // ÊòæÁ§∫loadingÁä∂ÊÄÅ
            verifyBtn.disabled = true;
            loading.style.display = 'block';
            result.innerHTML = '';
            
            try {
                const response = await fetch('/verify', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const resultClass = data.verified ? 'success' : 'warning';
                    const icon = data.verified ? '‚úÖ' : '‚ùå';
                    
                    result.innerHTML = `
                        <div class="result ${resultClass}">
                            ${icon} ${data.message}
                            <div class="file-info">
                                <div><strong>Êñá‰ª∂Âêç:</strong> ${data.filename}</div>
                                <div><strong>Êñá‰ª∂Â§ßÂ∞è:</strong> ${data.filesize} Â≠óËäÇ</div>
                                <div><strong>SHA-256:</strong> <span class="hash-display">${data.hash}</span></div>
                                <div><strong>È™åËØÅÁä∂ÊÄÅ:</strong> ${data.verified ? 'ÈÄöËøá' : 'Â§±Ë¥•'}</div>
                            </div>
                        </div>
                    `;
                } else {
                    result.innerHTML = `<div class="result error">‚ùå ${data.message}</div>`;
                }
            } catch (error) {
                result.innerHTML = `<div class="result error">‚ùå ÁΩëÁªúÈîôËØØ: ${error.message}</div>`;
            } finally {
                verifyBtn.disabled = false;
                loading.style.display = 'none';
            }
        });

        // Ê∏ÖÈô§ÁªìÊûúÂΩìÊñá‰ª∂ÊîπÂèòÊó∂
        document.getElementById('signFile').addEventListener('change', () => {
            document.getElementById('signResult').innerHTML = '';
        });

        document.getElementById('verifyFile').addEventListener('change', () => {
            document.getElementById('verifyResult').innerHTML = '';
        });

        document.getElementById('signatureFile').addEventListener('change', () => {
            document.getElementById('verifyResult').innerHTML = '';
        });

        // ÊºîÁ§∫ÂäüËÉΩ
        let demoData = {
            originalContent: '',
            tamperedContent: '',
            originalHash: '',
            tamperedHash: '',
            signature: ''
        };

        function startDemo() {
            document.getElementById('demoSteps').style.display = 'block';
            document.getElementById('demoBtn').textContent = 'ÊºîÁ§∫ËøõË°å‰∏≠...';
            document.getElementById('demoBtn').disabled = true;
        }

        function createDemoFile() {
            const content = document.getElementById('demoContent').value;
            demoData.originalContent = content;
            
            // Ê®°ÊãüËÆ°ÁÆóÂìàÂ∏å
            const hash = calculateSimpleHash(content);
            demoData.originalHash = hash;
            
            document.getElementById('originalHash').innerHTML = `
                <div><strong>Êñá‰ª∂ÂÜÖÂÆπÈïøÂ∫¶:</strong> ${content.length} Â≠óÁ¨¶</div>
                <div><strong>SHA-256ÂìàÂ∏å:</strong> <span style="color: #ffeb3b;">${hash}</span></div>
            `;
            
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
        }

        function signDemoFile() {
            // Ê®°ÊãüÁîüÊàêÊï∞Â≠óÁ≠æÂêç
            const signature = generateMockSignature(demoData.originalHash);
            demoData.signature = signature;
            
            document.getElementById('signatureResult').innerHTML = `
                <div style="color: #4caf50; font-weight: bold; margin-bottom: 10px;">‚úÖ Êï∞Â≠óÁ≠æÂêçÁîüÊàêÊàêÂäü</div>
                <div><strong>Á≠æÂêçÁÆóÊ≥ï:</strong> RSA-2048 + PSSÂ°´ÂÖÖ</div>
                <div><strong>Á≠æÂêçÈïøÂ∫¶:</strong> 256 Â≠óËäÇ</div>
                <div><strong>Á≠æÂêçÊëòË¶Å:</strong> <span style="color: #ffeb3b; font-family: monospace;">${signature.substring(0, 32)}...</span></div>
                <div style="margin-top: 10px; padding: 10px; background: #2e4057; border-radius: 4px;">
                    <div style="color: #61dafb; font-weight: bold;">üîê Âä†ÂØÜÁ≠æÂêçÊï∞ÊçÆ (ÈÉ®ÂàÜÊòæÁ§∫):</div>
                    <div style="font-family: monospace; font-size: 11px; word-break: break-all; color: #ffeb3b; margin-top: 5px;">
                        ${signature}
                    </div>
                </div>
            `;
            
            document.getElementById('step2').style.display = 'none';
            document.getElementById('step3').style.display = 'block';
        }

        function modifyDemo() {
            // Ê®°ÊãüÊñá‰ª∂ÁØ°Êîπ
            demoData.tamperedContent = demoData.originalContent.replace('¬•1,000,000', '¬•10,000,000');
            demoData.tamperedContent = demoData.tamperedContent.replace('Êú¨ÂêàÂêå‰∏ÄÁªèÁ≠æÁΩ≤‰∏çÂæóÈöèÊÑè‰øÆÊîπ', 'Êú¨ÂêàÂêåÊù°Ê¨æÂèØÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµË∞ÉÊï¥');
            
            demoData.tamperedHash = calculateSimpleHash(demoData.tamperedContent);
            
            document.getElementById('originalContent').textContent = demoData.originalContent.substring(0, 150) + '...';
            document.getElementById('tamperedContent').textContent = demoData.tamperedContent.substring(0, 150) + '...';
            
            document.getElementById('tamperedHash').innerHTML = `
                <div style="color: #f44336;"><strong>‚ö†Ô∏è Ê£ÄÊµãÂà∞Êñá‰ª∂‰øÆÊîπ</strong></div>
                <div><strong>ÂéüÂßãÂìàÂ∏å:</strong> <span style="color: #4caf50;">${demoData.originalHash}</span></div>
                <div><strong>ÂΩìÂâçÂìàÂ∏å:</strong> <span style="color: #f44336;">${demoData.tamperedHash}</span></div>
                <div style="color: #ff9800; margin-top: 10px;"><strong>ÂìàÂ∏åÂÄº‰∏çÂåπÈÖç - Êñá‰ª∂Â∑≤Ë¢´ÁØ°ÊîπÔºÅ</strong></div>
            `;
            
            document.getElementById('step3').style.display = 'none';
            document.getElementById('step4').style.display = 'block';
        }

        function verifyDemo() {
            document.getElementById('step4').style.display = 'none';
            document.getElementById('step5').style.display = 'block';
        }

        function resetDemo() {
            document.getElementById('demoSteps').style.display = 'none';
            document.getElementById('demoBtn').textContent = 'üöÄ ÂºÄÂßãÊºîÁ§∫';
            document.getElementById('demoBtn').disabled = false;
            
            // ÈáçÁΩÆÊâÄÊúâÊ≠•È™§
            for(let i = 1; i <= 5; i++) {
                document.getElementById(`step${i}`).style.display = i === 1 ? 'block' : 'none';
            }
            
            // Ê∏ÖÁ©∫ÊºîÁ§∫Êï∞ÊçÆ
            demoData = {
                originalContent: '',
                tamperedContent: '',
                originalHash: '',
                tamperedHash: '',
                signature: ''
            };
        }

        // ÁÆÄÂçïÂìàÂ∏åÊ®°ÊãüÂáΩÊï∞ (‰ªÖÁî®‰∫éÊºîÁ§∫)
        function calculateSimpleHash(content) {
            let hash = 0;
            if (content.length === 0) return hash.toString(16).padStart(64, '0');
            for (let i = 0; i < content.length; i++) {
                const char = content.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // ËΩ¨Êç¢‰∏∫32‰ΩçÊï¥Êï∞
            }
            // ÁîüÊàêÁ±ª‰ººSHA-256ÁöÑ64‰ΩçÂçÅÂÖ≠ËøõÂà∂Â≠óÁ¨¶‰∏≤
            const hashStr = Math.abs(hash).toString(16);
            return (hashStr + '0'.repeat(64)).substring(0, 64);
        }

        // Ê®°ÊãüÁîüÊàêÁ≠æÂêç
        function generateMockSignature(hash) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
            let signature = '';
            for (let i = 0; i < 344; i++) { // Base64ÁºñÁ†ÅÁöÑ256Â≠óËäÇÂ§ßÁ∫¶ÊòØ344‰∏™Â≠óÁ¨¶
                signature += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return signature;
        }

        // ÊºîÁ§∫ÊåâÈíÆ‰∫ã‰ª∂
        document.getElementById('demoBtn').addEventListener('click', startDemo);
    </script>
</body>
</html>